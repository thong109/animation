<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./assets/css/style4.css" />
  </head>
  <body>
    <div class="wrapp">
      <main class="main">
        <section class="section">
          <div class="section__wrapp">
            <div
              class="section__item work-1"
              data-bg="radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.3), rgba(0, 0, 0, 0.8) 80%)"
            >
              <div class="section__img">
                <picture>
                  <source
                    srcset="./assets/img/img-slide-0.webp"
                    type="image/webp"
                  />
                  <source
                    srcset="./assets/img/img-slide-0.jpg"
                    type="image/jpeg"
                  />
                  <img src="./assets/img/img-slide-0.jpg" alt="Ảnh fallback" />
                </picture>
              </div>
              <div class="section__text">
                <span class="work__num">work 1</span>
                <h2 class="section__title">
                  Background animation
                  <span class="stroke">On Gsap</span>
                </h2>
              </div>
            </div>
            <div
              class="section__item work-2"
              data-bg="radial-gradient(circle at 30% 30%, rgba(255, 50, 50, 0.4), rgba(0, 0, 0, 0.7) 50%)"
            >
              <div class="section__img">
                <picture>
                  <source
                    srcset="./assets/img/img-slide-2.webp"
                    type="image/webp"
                  />
                  <source
                    srcset="./assets/img/img-slide-2.jpg"
                    type="image/jpeg"
                  />
                  <img src="./assets/img/img-slide-2.jpg" alt="Ảnh fallback" />
                </picture>
              </div>
              <div class="section__text">
                <span class="work__num">work 2</span>
                <h2 class="section__title">
                  Background animation
                  <span class="stroke">On Gsap</span>
                </h2>
              </div>
            </div>
            <div
              class="section__item work-3"
              data-bg="linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(255, 0, 0, 0.4))"
            >
              <div class="section__img">
                <picture>
                  <source
                    srcset="./assets/img/img-slide-3.webp"
                    type="image/webp"
                  />
                  <source
                    srcset="./assets/img/img-slide-3.jpg"
                    type="image/jpeg"
                  />
                  <img src="./assets/img/img-slide-3.jpg" alt="Ảnh fallback" />
                </picture>
              </div>
              <div class="section__text">
                <span class="work__num">work 3</span>
                <h2 class="section__title">
                  Background animation
                  <span class="stroke">On Gsap</span>
                </h2>
              </div>
            </div>
            <div
              class="section__item work-4"
              data-bg="radial-gradient(circle at 70% 70%, rgba(139, 0, 0, 0.4), rgba(0, 0, 0, 0.9) 60%)"
            >
              <div class="section__img">
                <picture>
                  <source
                    srcset="./assets/img/img-slide-1.webp"
                    type="image/webp"
                  />
                  <source
                    srcset="./assets/img/img-slide-1.jpg"
                    type="image/jpeg"
                  />
                  <img src="./assets/img/img-slide-1.jpg" alt="Ảnh fallback" />
                </picture>
              </div>
              <div class="section__text">
                <span class="work__num">work 4</span>
                <h2 class="section__title">
                  Background animation
                  <span class="stroke">On Gsap</span>
                </h2>
              </div>
            </div>
            <div
              class="section__item work-5"
              data-bg="linear-gradient(45deg, rgba(0, 0, 0, 0.6), rgba(255, 0, 0, 0.5))"
            >
              <div class="section__img">
                <picture>
                  <source
                    srcset="./assets/img/img-slide-5.webp"
                    type="image/webp"
                  />
                  <source
                    srcset="./assets/img/img-slide-5.jpg"
                    type="image/jpeg"
                  />
                  <img src="./assets/img/img-slide-5.jpg" alt="Ảnh fallback" />
                </picture>
              </div>
              <div class="section__text">
                <span class="work__num">work 5</span>
                <h2 class="section__title">
                  Background animation
                  <span class="stroke">On Gsap</span>
                </h2>
              </div>
            </div>
            <div
              class="section__item work-6"
              data-bg="radial-gradient(circle at 50% 50%, rgba(178, 34, 34, 0.4), rgba(0, 0, 0, 0.85) 75%)"
            >
              <div class="section__img">
                <picture>
                  <source
                    srcset="./assets/img/img-slide-6.webp"
                    type="image/webp"
                  />
                  <source
                    srcset="./assets/img/img-slide-6.jpg"
                    type="image/jpeg"
                  />
                  <img src="./assets/img/img-slide-6.jpg" alt="Ảnh fallback" />
                </picture>
              </div>
              <div class="section__text">
                <span class="work__num">work 6</span>
                <h2 class="section__title">
                  Background animation
                  <span class="stroke">On Gsap</span>
                </h2>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
    <script src="https://unpkg.com/lenis@1.3.0/dist/lenis.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>
  </body>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      "use strict";
      gsap.registerPlugin(ScrollTrigger);

      const lenis = new Lenis({ duration: 1.2 });
      lenis.on("scroll", ScrollTrigger.update);
      gsap.ticker.add((time) => lenis.raf(time * 1000));
      gsap.ticker.lagSmoothing(0);

      const featureSection = document.querySelector(".section");
      const featureItems = document.querySelectorAll(".section__item");

      if (!featureSection || featureItems.length === 0) return;

      // Set màu nền đầu tiên
      const firstColor = featureItems[0].getAttribute("data-bg");
      featureSection.style.backgroundColor = firstColor;

      // Tạo trigger cho từng section__item
      featureItems.forEach((item) => {
        const bgGradient = item.getAttribute("data-bg");

        ScrollTrigger.create({
          trigger: item,
          start: "top center",
          end: "bottom center",
          onEnter: () => {
            gsap.to(featureSection, {
              background: bgGradient,
              duration: 0.5,
              ease: "power2.out",
            });
          },
          onEnterBack: () => {
            gsap.to(featureSection, {
              background: bgGradient,
              duration: 0.5,
              ease: "power2.out",
            });
          },
        });
      });
    });
  </script>
</html>
